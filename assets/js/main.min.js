"use strict";function toggleAttribute(element,attribute,trueVal,falseVal){void 0===trueVal&&(trueVal=!0),void 0===falseVal&&(falseVal=!1),element.getAttribute(attribute)!==trueVal?element.setAttribute(attribute,trueVal):element.setAttribute(attribute,falseVal)}function menuToggle(target,duration){var initialParentHeight,finalParentHeight,menu,menuItems,transitionListener,initialPositions=[],finalPositions=[];target&&(menu=target.closest(".menu-wrapper"),(menuItems=menu.querySelectorAll(".menu-item")).forEach((function(menuItem,index){initialPositions[index]={x:menuItem.offsetLeft,y:menuItem.offsetTop}})),initialParentHeight=target.parentElement.offsetHeight,target.classList.add("toggling-target"),target.classList.toggle("active"),menuItems.forEach((function(menuItem,index){finalPositions[index]={x:menuItem.offsetLeft,y:menuItem.offsetTop}})),finalParentHeight=target.parentElement.offsetHeight,target.classList.toggle("active"),menu.classList.add("is-toggling"),target.classList.toggle("active"),menuItems.forEach((function(menuItem,index){var initialPosition=initialPositions[index];0===initialPosition.y&&menuItem.parentElement===target&&(initialPosition.y=initialParentHeight),menuItem.style.transform="translate("+initialPosition.x+"px, "+initialPosition.y+"px)"})),requestAnimationFrame((function(){requestAnimationFrame((function(){menu.classList.add("is-animating"),menuItems.forEach((function(menuItem,index){var finalPosition=finalPositions[index];0===finalPosition.y&&menuItem.parentElement===target&&(finalPosition.y=finalParentHeight),void 0!==duration&&(menuItem.style.transitionDuration=duration+"ms"),menuItem.style.transform="translate("+finalPosition.x+"px, "+finalPosition.y+"px)"})),void 0!==duration&&(target.style.transitionDuration=duration+"ms")})),transitionListener=function(){menu.classList.remove("is-animating"),menu.classList.remove("is-toggling"),target.classList.remove("toggling-target"),menuItems.forEach((function(menuItem){menuItem.style.transform="",menuItem.style.transitionDuration=""})),target.style.transitionDuration="",target.removeEventListener("transitionend",transitionListener)},target.addEventListener("transitionend",transitionListener)})))}class Toggles{clickedEl=!1;constructor(){console.log("Toggles init"),this.toggle(),this.resizeCheck(),this.untoggleOnEscapeKeyPress()}performToggle(element){let target,timeOutTime,classToToggle;const toggle=element,targetString=toggle.dataset.toggleTarget,activeClass="active";document.querySelectorAll(".show-modal").length||(this.clickedEl=document.activeElement),target="next"===targetString?toggle.nextSibling:document.querySelector(targetString),target.classList.contains("active")?target.dispatchEvent(new Event("toggle-target-before-active")):target.dispatchEvent(new Event("toggle-target-before-inactive")),classToToggle=toggle.dataset.classToToggle||"active",timeOutTime=0,target.classList.contains("cover-modal")&&(timeOutTime=10),setTimeout(()=>{let focusElement;const newTarget=target.classList.contains("sub-menu")?toggle.closest(".menu-item").querySelector(".sub-menu"):target,duration=toggle.dataset.toggleDuration;"slidetoggle"!==toggle.dataset.toggleType||instantly||"0"===duration?newTarget.classList.toggle(classToToggle):menuToggle(newTarget,duration),"next"===targetString?toggle.classList.toggle("active"):target.classList.contains("sub-menu")?toggle.classList.toggle("active"):document.querySelector('*[data-toggle-target="'+targetString+'"]').classList.toggle("active"),toggleAttribute(toggle,"aria-expanded","true","false"),this.clickedEl&&-1!==toggle.getAttribute("class").indexOf("close-")&&toggleAttribute(this.clickedEl,"aria-expanded","true","false"),toggle.dataset.toggleBodyClass&&document.body.classList.toggle(toggle.dataset.toggleBodyClass),toggle.dataset.setFocus&&(focusElement=document.querySelector(toggle.dataset.setFocus),focusElement&&(target.classList.contains("active")?focusElement.focus():focusElement.blur())),target.dispatchEvent(new Event("toggled")),target.classList.contains("active")?target.dispatchEvent(new Event("toggle-target-after-active")):target.dispatchEvent(new Event("toggle-target-after-inactive"))},timeOutTime)}toggle(){document.querySelectorAll("*[data-toggle-target]").forEach(element=>{element.addEventListener("click",event=>{event.preventDefault(),this.performToggle(element)})})}resizeCheck(){document.querySelectorAll("*[data-untoggle-above], *[data-untoggle-below], *[data-toggle-above], *[data-toggle-below]").length&&window.addEventListener("resize",()=>{const winWidth=window.innerWidth,toggles=document.querySelectorAll(".toggle");toggles.forEach(toggle=>{const unToggleAbove=toggle.dataset.untoggleAbove,unToggleBelow=toggle.dataset.untoggleBelow,toggleAbove=toggle.dataset.toggleAbove,toggleBelow=toggle.dataset.toggleBelow;(unToggleAbove||unToggleBelow||toggleAbove||toggleBelow)&&((unToggleAbove&&winWidth>unToggleAbove||unToggleBelow&&winWidth<unToggleBelow)&&toggle.classList.contains("active")||(toggleAbove&&winWidth>toggleAbove||toggleBelow&&winWidth<toggleBelow)&&!toggle.classList.contains("active"))&&toggle.click()})})}untoggleOnEscapeKeyPress(){document.addEventListener("keyup",event=>{"Escape"===event.key&&document.querySelectorAll("*[data-untoggle-on-escape].active").forEach(element=>{element.classList.contains("active")&&element.click()})})}}document.addEventListener("DOMContentLoaded",event=>{console.log("Init "+event),new Toggles});
//# sourceMappingURL=main.min.js.map